---
apiVersion: metallb.io/v1beta1
kind: IPAddressPool
metadata:
  name: address-pool
  namespace: metallb-system
spec:
  addresses:
    - "${METALLB_LB_RANGE}"
---
apiVersion: metallb.io/v1beta1
kind: IPAddressPool
metadata:
  name: lab-address-pool
  namespace: metallb-system
spec:
  addresses:
    - "10.0.0.200-10.0.0.254"
---
apiVersion: metallb.io/v1beta1
kind: L2Advertisement
metadata:
  name: advertisement
  namespace: metallb-system
spec:
  ipAddressPools:
    - address-pool
  nodeSelectors:
    - matchLabels:
        kubernetes.io/hostname: master
    - matchLabels:
        kubernetes.io/hostname: node01
    - matchLabels:
        kubernetes.io/hostname: node02
  interfaces:
    - eth0
---
apiVersion: metallb.io/v1beta1
kind: L2Advertisement
metadata:
  name: lab-advertisement
  namespace: metallb-system
spec:
  ipAddressPools:
    - lab-address-pool
  nodeSelectors:
    - matchLabels:
        kubernetes.io/hostname: k3s1
    - matchLabels:
        kubernetes.io/hostname: k3s2
    - matchLabels:
        kubernetes.io/hostname: k3s3
  interfaces:
    - ens18
